<!DOCTYPE html>
<html>
<head>
    <title>Cloudinary JS Upload</title>
</head>
<body>

    <h2>Cloudinary Upload Widget Example</h2>
    <button id="upload_widget">Upload Image</button>

    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>  

    <script type="text/javascript">  
    // 1. Configure the widget
    const myWidget = cloudinary.createUploadWidget({
       cloudName: 'phikit', // ⚠️ Replace with your cloud name
       uploadPreset: 'Unsigneda' // ⚠️ Replace with the preset you created
    }, (error, result) => { 
        // Inside your upload widget's success callback...
        if (!error && result && result.event === "success") { 
        
        // 1. Get the original URL
        const originalUrl = result.info.secure_url;
        console.log("Original URL:", originalUrl);

        // 2. Define your transformation
        const autoCropTransformation = 'w_400,h_400,c_fill,g_auto';

        // 3. Insert the transformation into the URL
        const parts = originalUrl.split('/upload/');
        const transformedUrl = parts[0] + '/upload/' + autoCropTransformation + '/' + parts[1];
        
        console.log("Transformed URL:", transformedUrl);
        // Now you can use this transformedUrl in an <img> tag!
        }
      }
    );

    // 2. Add a click listener to the button
    document.getElementById("upload_widget").addEventListener("click", function(){
        myWidget.open();
      }, false);
    </script>
</body>
</html>